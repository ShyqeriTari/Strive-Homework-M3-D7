<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">

    <title>M3-D7</title>
  </head>
  <body>
    <center><h1 style="color: darkcyan; margin-bottom: 30px;">M3-D7</h1></center>

<div class="d-flex mb-5">
    <div class="dropdown mx-3">
        <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenuButton1" data-bs-toggle="dropdown" aria-expanded="false">
          Choose One
        </button>
        <ul class="dropdown-menu" aria-labelledby="dropdownMenuButton1">
          <li><a class="dropdown-item" onclick="dropFilter(event)" href="#">Email</a></li>
          <li><a class="dropdown-item" onclick="dropFilter(event)" href="#">Username
          </a></li>
          <li><a class="dropdown-item"  onclick="dropFilter(event)" href="#">Name</a></li>
        </ul>
      </div>

      <input type="text" placeholder="Write something">
    </div>  

    <table class="table">
        <thead>
          <tr>
            <th  scope="col">#</th>
            <th class =" titles" scope="col">Name</th>
            <th class =" titles" scope="col">Username</th>
            <th  class =" titles" scope="col">Email</th>
          </tr>
        </thead>
        <tbody class="table-body">
         
        </tbody>
      </table>


    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
    <script>

// search = (event) => {
    // const usersList = await fetch(`https://jsonplaceholder.typicode.com/users${event.target.value}`)
//         .then(response => response.json())
//         .then(data =>{
//             console.log(data.data[0])

//             let datas = data.data
//             let divs = document.getElementById("searchedEl")

//             divs.innerHTML = ""
//             datas.forEach(element => {
//                 divs.innerHTML += `<div class="d-flex" style="margin-bottom: 20px; align-items:center;" > <a href="./index-album.html?albumId=${element.album.id}" style="cursor:pointer; width 20%; margin-right: 20px;"><img src=${element.album.cover_medium} style="width:100%; height:200px; object-fit:cover;"></img></a>
//                     <div>
//                     <a href="./index-album.html?albumId=${element.album.id}" style="cursor:pointer; color:white;"><p class="mb-3"> ${element.album.title}</p></a>
//                     <a href="./artist.html?artistId=${element.artist.id}" style="cursor:pointer; color:white;"><p > ${element.artist.name}</p></a>
//                     </div> 
//                     </div> `
//             });
// }).catch (err = () =>{
//     alert("Refresh page")
// })
// }


displayUsers = async ()  => {
   try { const collectData = await fetch("https://jsonplaceholder.typicode.com/users")
    const dataResponse = await collectData.json()

    let table = document.querySelector(".table-body")

    dataResponse.forEach((user, idx) => {

        table.innerHTML += `<tr>
            <th scope="row">${idx + 1}</th>
            <td>${user.name}</td>
            <td>${user.username}</td>
            <td>${user.email}</td>
          </tr>`
        })

    console.log(dataResponse)}
    catch(err) {
        console.log(err)
    }

}

const dropFilter = async (event) => {

    try { 
        const collectData2 = await fetch("https://jsonplaceholder.typicode.com/users")
    const dataResponse2 = await collectData2.json()
    console.log(dataResponse2)

    let dropDowns = document.querySelectorAll(".dropdown-item")
    let table = document.querySelector(".table-body")
    table.innerHTML =" "
    let titles = document.querySelectorAll(".titles")
    
    for (let i = 0; i < dropDowns.length; i++) {
        titles[i].innerText = " "
        titles[0].innerText = event.target.innerText
    }

    
    
    dataResponse2.forEach((users, idx) => {

table.innerHTML += `<tr>
    <th scope="row">${idx + 1}</th>
    <td>${users[event.target.value]}</td>
  </tr>`
})


    }catch(err) {
        console.log(err)
    }
        
}



window.onload = () => {
    displayUsers()
}

    </script>

  </body>
</html>